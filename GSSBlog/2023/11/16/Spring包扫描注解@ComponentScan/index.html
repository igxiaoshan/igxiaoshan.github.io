<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="keywords" content="Hexo Theme Redefine">
    
    <meta name="author" content="igxiaoshan">
    <!-- preconnect -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>

    
    <!--- Seo Part-->
    
    <link rel="canonical" href="https://igxiaoshan.github.io/GSSBlog/2023/11/16/spring包扫描注解@componentscan/"/>
    <meta name="robots" content="index,follow">
    <meta name="googlebot" content="index,follow">
    <meta name="revisit-after" content="1 days">
    
        <meta name="description" content="@ComponentScan使用场景入门介绍1234567891011121314&#x2F;&#x2F; &#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D; 源码 &#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x2F;** * @since 3.1 * @see Configuration *&#x2F;@Repeatable(ComponentScans.class)public @interface ComponentScan &amp;#123;&amp;">
<meta property="og:type" content="article">
<meta property="og:title" content="Spring 包扫描注解 @ComponentScan">
<meta property="og:url" content="https://igxiaoshan.github.io/GSSBlog/2023/11/16/Spring%E5%8C%85%E6%89%AB%E6%8F%8F%E6%B3%A8%E8%A7%A3@ComponentScan/index.html">
<meta property="og:site_name" content="igxiaoshan&#39;s Blog">
<meta property="og:description" content="@ComponentScan使用场景入门介绍1234567891011121314&#x2F;&#x2F; &#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D; 源码 &#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x2F;** * @since 3.1 * @see Configuration *&#x2F;@Repeatable(ComponentScans.class)public @interface ComponentScan &amp;#123;&amp;">
<meta property="og:locale" content="zh_CN">
<meta property="article:published_time" content="2023-11-16T09:34:06.486Z">
<meta property="article:modified_time" content="2023-12-21T01:45:26.490Z">
<meta property="article:author" content="igxiaoshan">
<meta property="article:tag" content="Spring">
<meta name="twitter:card" content="summary">
    
    
    <!--- Icon Part-->
    <link rel="icon" type="image/png" href="/GSSBlog/images/logo.png" sizes="192x192">
    <link rel="apple-touch-icon" sizes="180x180" href="/GSSBlog/images/logo.png">
    <meta name="theme-color" content="#A31F34">
    <link rel="shortcut icon" href="/GSSBlog/images/logo.png">
    <!--- Page Info-->
    
    <title>
        
            Spring 包扫描注解 @ComponentScan -
        
        igxiaoshan&#39;s Blog
    </title>
    
<link rel="stylesheet" href="/GSSBlog/css/style.css">


    
        
<link rel="stylesheet" href="/GSSBlog/assets/build/styles.css">

    

    
<link rel="stylesheet" href="/GSSBlog/fonts/fonts.css">

    
<link rel="stylesheet" href="/GSSBlog/fonts/Satoshi/satoshi.css">

    
<link rel="stylesheet" href="/GSSBlog/fonts/Chillax/chillax.css">

    <!--- Font Part-->
    
    
    
    

    <!--- Inject Part-->
    
    <script id="hexo-configurations">
    window.config = {"hostname":"igxiaoshan.github.io","root":"/GSSBlog/","language":"zh-CN","path":"search.xml"};
    window.theme = {"articles":{"style":{"font_size":"16px","line_height":1.5,"image_border_radius":"14px","image_alignment":"center","image_caption":false,"link_icon":true},"word_count":{"enable":true,"count":true,"min2read":true},"author_label":{"enable":true,"auto":false,"list":[]},"code_block":{"copy":true,"style":"mac","font":{"enable":false,"family":null,"url":null}},"toc":{"enable":true,"max_depth":3,"number":false,"expand":true,"init_open":true},"copyright":false,"lazyload":true,"recommendation":{"enable":false,"title":"推荐阅读","limit":3,"mobile_limit":2,"placeholder":"/images/wallhaven-wqery6-light.webp","skip_dirs":[]}},"colors":{"primary":"#A31F34","secondary":null},"global":{"fonts":{"chinese":{"enable":false,"family":null,"url":null},"english":{"enable":false,"family":null,"url":null}},"content_max_width":"1000px","sidebar_width":"210px","hover":{"shadow":true,"scale":false},"scroll_progress":{"bar":false,"percentage":true},"website_counter":{"url":"https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js","enable":true,"site_pv":true,"site_uv":true,"post_pv":true},"single_page":true,"open_graph":true,"google_analytics":{"enable":false,"id":null}},"home_banner":{"enable":true,"style":"fixed","image":{"light":"/images/banner.jpg","dark":"/images/wallhaven-wqery6-dark.webp"},"title":"「凌晨四点半，海棠花未眠」","subtitle":{"text":["凌晨四点半，海棠花未眠。总觉得这时，你应该在我身边。"],"hitokoto":{"enable":false,"api":"https://v1.hitokoto.cn"},"typing_speed":100,"backing_speed":80,"starting_delay":500,"backing_delay":1500,"loop":true,"smart_backspace":true},"text_color":{"light":"#fff","dark":"#d1d1b6"},"text_style":{"title_size":"2.8rem","subtitle_size":"1.5rem","line_height":1.2},"custom_font":{"enable":false,"family":null,"url":null},"social_links":{"enable":true,"links":{"github":"https://igxiaoshan.github.io/","instagram":null,"zhihu":null,"twitter":null,"email":null},"qrs":{"weixin":null}}},"plugins":{"feed":{"enable":false},"aplayer":{"enable":false,"type":"fixed","audios":[{"name":null,"artist":null,"url":null,"cover":null}]},"mermaid":{"enable":false,"version":"9.3.0"}},"version":"2.5.0","navbar":{"auto_hide":true,"color":{"left":"#f78736","right":"#367df7","transparency":35},"links":{"Home":{"path":"/","icon":"fa-regular fa-house"},"Archives":{"path":"/archives","icon":"fa-regular fa-archive"},"Tags":{"path":"/tags","icon":"fa-regular fa-tags"},"Categories":{"path":"/categories","icon":"fa-regular fa-folder"}},"search":{"enable":true,"preload":true}},"page_templates":{"friends_column":2,"tags_style":"blur"},"home":{"sidebar":{"enable":true,"position":"left","first_item":"menu","announcement":"凌晨四点半，海棠花未眠","links":{"档案":{"path":"/archives","icon":"fa-regular fa-archive"},"标签":{"path":"/tags","icon":"fa-regular fa-tags"},"分类":{"path":"/categories","icon":"fa-regular fa-folder"}}},"article_date_format":"YYYY-MM-DD","categories":{"enable":true,"limit":3},"tags":{"enable":true,"limit":3}},"footerStart":"2022/8/17 11:45:14"};
    window.lang_ago = {"second":"%s 秒前","minute":"%s 分钟前","hour":"%s 小时前","day":"%s 天前","week":"%s 周前","month":"%s 个月前","year":"%s 年前"};
    window.data = {"masonry":false};
  </script>
    
    <!--- Fontawesome Part-->
    
<link rel="stylesheet" href="/GSSBlog/fontawesome/fontawesome.min.css">

    
<link rel="stylesheet" href="/GSSBlog/fontawesome/brands.min.css">

    
<link rel="stylesheet" href="/GSSBlog/fontawesome/solid.min.css">

    
<link rel="stylesheet" href="/GSSBlog/fontawesome/regular.min.css">

    
    
    
    
<meta name="generator" content="Hexo 6.3.0"></head>


<body>
<div class="progress-bar-container">
    

    
        <span class="pjax-progress-bar"></span>
        <span class="swup-progress-icon">
            <i class="fa-solid fa-circle-notch fa-spin"></i>
        </span>
    
</div>


<main class="page-container" id="swup">

    

    <div class="main-content-container">


        <div class="main-content-header">
            <header class="navbar-container">
    
    <div class="navbar-content">
        <div class="left">
            
                <a class="logo-image" href="/GSSBlog/">
                    <img src="/GSSBlog/images/logo.png">
                </a>
            
            <a class="logo-title" href="/GSSBlog/">
                
                igxiaoshan&#39;s Blog
                
            </a>
        </div>

        <div class="right">
            <!-- PC -->
            <div class="desktop">
                <ul class="navbar-list">
                    
                        
                            <li class="navbar-item">
                                <!-- Menu -->
                                <a class="" 
                                    href="/GSSBlog/"  >
                                    
                                        
                                            <i class="fa-regular fa-house"></i>
                                        
                                        首页
                                    
                                </a>
                                <!-- Submenu -->
                                
                            </li>
                    
                        
                            <li class="navbar-item">
                                <!-- Menu -->
                                <a class="" 
                                    href="/GSSBlog/archives"  >
                                    
                                        
                                            <i class="fa-regular fa-archive"></i>
                                        
                                        归档
                                    
                                </a>
                                <!-- Submenu -->
                                
                            </li>
                    
                        
                            <li class="navbar-item">
                                <!-- Menu -->
                                <a class="" 
                                    href="/GSSBlog/tags"  >
                                    
                                        
                                            <i class="fa-regular fa-tags"></i>
                                        
                                        标签
                                    
                                </a>
                                <!-- Submenu -->
                                
                            </li>
                    
                        
                            <li class="navbar-item">
                                <!-- Menu -->
                                <a class="" 
                                    href="/GSSBlog/categories"  >
                                    
                                        
                                            <i class="fa-regular fa-folder"></i>
                                        
                                        分类
                                    
                                </a>
                                <!-- Submenu -->
                                
                            </li>
                    
                    
                        <li class="navbar-item search search-popup-trigger">
                            <i class="fa-solid fa-magnifying-glass"></i>
                        </li>
                    
                </ul>
            </div>
            <!-- Mobile -->
            <div class="mobile">
                
                    <div class="icon-item search search-popup-trigger"><i class="fa-solid fa-magnifying-glass"></i></div>
                
                <div class="icon-item navbar-bar">
                    <div class="navbar-bar-middle"></div>
                </div>
            </div>
        </div>
    </div>

    <!-- Mobile drawer -->
    <div class="navbar-drawer w-full absolute top-0 left-0 bg-background-color">
        <ul class="drawer-navbar-list flex flex-col justify-start items-center">
            
                
                    <li class="drawer-navbar-item text-base my-1.5 flex justify-center items-center">
                        <a class="rounded-3xl py-1.5 px-5 hover:border hover:!text-primary active:!text-primary group " 
                        href="/GSSBlog/"  >
                             
                                
                                    <i class="fa-regular fa-house"></i>
                                
                                首页
                            
                        </a>
                    </li>
                    <!-- Submenu -->
                    
            
                
                    <li class="drawer-navbar-item text-base my-1.5 flex justify-center items-center">
                        <a class="rounded-3xl py-1.5 px-5 hover:border hover:!text-primary active:!text-primary group " 
                        href="/GSSBlog/archives"  >
                             
                                
                                    <i class="fa-regular fa-archive"></i>
                                
                                归档
                            
                        </a>
                    </li>
                    <!-- Submenu -->
                    
            
                
                    <li class="drawer-navbar-item text-base my-1.5 flex justify-center items-center">
                        <a class="rounded-3xl py-1.5 px-5 hover:border hover:!text-primary active:!text-primary group " 
                        href="/GSSBlog/tags"  >
                             
                                
                                    <i class="fa-regular fa-tags"></i>
                                
                                标签
                            
                        </a>
                    </li>
                    <!-- Submenu -->
                    
            
                
                    <li class="drawer-navbar-item text-base my-1.5 flex justify-center items-center">
                        <a class="rounded-3xl py-1.5 px-5 hover:border hover:!text-primary active:!text-primary group " 
                        href="/GSSBlog/categories"  >
                             
                                
                                    <i class="fa-regular fa-folder"></i>
                                
                                分类
                            
                        </a>
                    </li>
                    <!-- Submenu -->
                    
            

        </ul>
    </div>

    <div class="window-mask"></div>

</header>


        </div>

        <div class="main-content-body">

            

            <div class="main-content">

                
                    <div class="post-page-container">
    <div class="article-content-container">

        <div class="article-title">
            
                <h1 class="article-title-regular">Spring 包扫描注解 @ComponentScan</h1>
            
            </div>
            
                    
        
        
            <div class="article-header flex flex-row gap-2 items-center">
                <div class="avatar w-[46px] h-[46px] flex-shrink-0 rounded-medium border border-border-color p-[1px]">
                    <img src="/GSSBlog/images/avatar.jpg">
                </div>
                <div class="info flex flex-col justify-between">
                    <div class="author flex items-center">
                        <span class="name text-default-text-color text-lg font-semibold">igxiaoshan</span>
                        
                            <span class="author-label ml-1.5 text-xs px-2 py-0.5 rounded-small text-third-text-color border border-shadow-color-1">Lv5</span>
                        
                    </div>
                    <div class="meta-info">
                        <div class="article-meta-info">
    <span class="article-date article-meta-item">
        <i class="fa-regular fa-pen-fancy"></i>&nbsp;
        <span class="desktop">2023-11-16 17:34:06</span>
        <span class="mobile">2023-11-16 17:34:06</span>
        <span class="hover-info">创建</span>
    </span>
    
        <span class="article-date article-meta-item">
            <i class="fa-regular fa-wrench"></i>&nbsp;
            <span class="desktop">2023-12-21 09:45:26</span>
            <span class="mobile">2023-12-21 09:45:26</span>
            <span class="hover-info">更新</span>
        </span>
    

    
        <span class="article-categories article-meta-item">
            <i class="fa-regular fa-folders"></i>&nbsp;
            <ul>
                
                
                    
                        
                        <li>
                            <a href="/GSSBlog/categories/Spring/">Spring</a>&nbsp;
                        </li>
                    
                    
                
                    
                        
                            <li>></li>
                        
                        <li>
                            <a href="/GSSBlog/categories/Spring/Apply/">Apply</a>&nbsp;
                        </li>
                    
                    
                
            </ul>
        </span>
    
    
        <span class="article-tags article-meta-item">
            <i class="fa-regular fa-tags"></i>&nbsp;
            <ul>
                
                    <li>
                        <a href="/GSSBlog/tags/Spring/">Spring</a>&nbsp;
                    </li>
                
            </ul>
        </span>
    

    
    
        <span class="article-wordcount article-meta-item">
            <i class="fa-regular fa-typewriter"></i>&nbsp;<span>3.8k 字</span>
        </span>
    
    
        <span class="article-min2read article-meta-item">
            <i class="fa-regular fa-clock"></i>&nbsp;<span>19 分钟</span>
        </span>
    
    
        <span class="article-pv article-meta-item">
            <i class="fa-regular fa-eye"></i>&nbsp;<span id="busuanzi_value_page_pv"></span>
        </span>
    
</div>

                    </div>
                </div>
            </div>
        

        


        <div class="article-content markdown-body">
            <h1 id="ComponentScan使用场景"><a href="#ComponentScan使用场景" class="headerlink" title="@ComponentScan使用场景"></a>@ComponentScan使用场景</h1><h2 id="入门介绍"><a href="#入门介绍" class="headerlink" title="入门介绍"></a>入门介绍</h2><div class="highlight-container" data-rel="Java"><figure class="iseeu highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ==================== 源码 ====================</span></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@since</span> 3.1</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@see</span> Configuration</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Repeatable(ComponentScans.class)</span></span><br><span class="line"><span class="keyword">public</span> <span class="meta">@interface</span> ComponentScan &#123;&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@since</span> 4.3</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@see</span> ComponentScan</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="meta">@interface</span> ComponentScans &#123;&#125;</span><br></pre></td></tr></table></figure></div>

<blockquote>
<p>通过源码可以看到<code>@ComponentScan</code>注解标记着 <code>@since 3.1</code>;说明 <code>@ComponentScan</code> 注解是从 3.1版本提供的;在<code>@ComponentScan</code>注解上标记了一个<code>@Repeatbale</code>注解,<code>@Repeatable</code>注解的属性值为<code>ComponentScans.class</code>.查看<code>@ComponentScans</code>注解源码,类上标记着<code>@since 4.3</code>,也就是说<code>@ComponentSacns</code>注解是从<code>Spring 4.3</code>版本开始提供的. <code>@ComponentScans</code>注解相当于是<code>@ComponentScan</code>注解的一个数组,<code>@ComponentScans</code>注解可以多次使用<code>@ComponentScan</code>注解来扫描不同的包路径</p>
</blockquote>
<h2 id="注解说明"><a href="#注解说明" class="headerlink" title="注解说明"></a>注解说明</h2><blockquote>
<p><code>@ComponentScan</code>注解的核心功能就是 Spring IOC 容器再刷新的时候会扫描对应包下标注了<code>@Component</code>,<code>@Configuration</code>,<code>@Repository</code>,<code>@Service</code>,<code>@Controller</code>等注解的类,生成扫描到的<code>Bean</code>定义信息,将其保存到<code>BeanFactory</code>中<code>beanDifinitionMap</code>中</p>
</blockquote>
<h2 id="源码解析"><a href="#源码解析" class="headerlink" title="源码解析"></a>源码解析</h2><div class="highlight-container" data-rel="Java"><figure class="iseeu highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ==================== 全文源码 ====================</span></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> Chris Beams</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> Juergen Hoeller</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> Sam Brannen</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@since</span> 3.1</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@see</span> Configuration</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Retention(RetentionPolicy.RUNTIME)</span></span><br><span class="line"><span class="meta">@Target(ElementType.TYPE)</span></span><br><span class="line"><span class="meta">@Documented</span></span><br><span class="line"><span class="meta">@Repeatable(ComponentScans.class)</span></span><br><span class="line"><span class="keyword">public</span> <span class="meta">@interface</span> ComponentScan &#123;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * Alias for &#123;<span class="doctag">@link</span> #basePackages&#125;.</span></span><br><span class="line"><span class="comment">	 * &lt;p&gt;Allows for more concise annotation declarations if no other attributes</span></span><br><span class="line"><span class="comment">	 * are needed &amp;mdash; for example, &#123;<span class="doctag">@code</span> <span class="doctag">@ComponentScan</span>(&quot;org.my.pkg&quot;)&#125;</span></span><br><span class="line"><span class="comment">	 * instead of &#123;<span class="doctag">@code</span> <span class="doctag">@ComponentScan</span>(basePackages = &quot;org.my.pkg&quot;)&#125;.</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="meta">@AliasFor(&quot;basePackages&quot;)</span></span><br><span class="line">	String[] value() <span class="keyword">default</span> &#123;&#125;;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * Base packages to scan for annotated components.</span></span><br><span class="line"><span class="comment">	 * &lt;p&gt;&#123;<span class="doctag">@link</span> #value&#125; is an alias for (and mutually exclusive with) this</span></span><br><span class="line"><span class="comment">	 * attribute.</span></span><br><span class="line"><span class="comment">	 * &lt;p&gt;Use &#123;<span class="doctag">@link</span> #basePackageClasses&#125; for a type-safe alternative to</span></span><br><span class="line"><span class="comment">	 * String-based package names.</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="meta">@AliasFor(&quot;value&quot;)</span></span><br><span class="line">	String[] basePackages() <span class="keyword">default</span> &#123;&#125;;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * Type-safe alternative to &#123;<span class="doctag">@link</span> #basePackages&#125; for specifying the packages</span></span><br><span class="line"><span class="comment">	 * to scan for annotated components. The package of each class specified will be scanned.</span></span><br><span class="line"><span class="comment">	 * &lt;p&gt;Consider creating a special no-op marker class or interface in each package</span></span><br><span class="line"><span class="comment">	 * that serves no purpose other than being referenced by this attribute.</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	Class&lt;?&gt;[] basePackageClasses() <span class="keyword">default</span> &#123;&#125;;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * The &#123;<span class="doctag">@link</span> BeanNameGenerator&#125; class to be used for naming detected components</span></span><br><span class="line"><span class="comment">	 * within the Spring container.</span></span><br><span class="line"><span class="comment">	 * &lt;p&gt;The default value of the &#123;<span class="doctag">@link</span> BeanNameGenerator&#125; interface itself indicates</span></span><br><span class="line"><span class="comment">	 * that the scanner used to process this &#123;<span class="doctag">@code</span> <span class="doctag">@ComponentScan</span>&#125; annotation should</span></span><br><span class="line"><span class="comment">	 * use its inherited bean name generator, e.g. the default</span></span><br><span class="line"><span class="comment">	 * &#123;<span class="doctag">@link</span> AnnotationBeanNameGenerator&#125; or any custom instance supplied to the</span></span><br><span class="line"><span class="comment">	 * application context at bootstrap time.</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@see</span> AnnotationConfigApplicationContext#setBeanNameGenerator(BeanNameGenerator)</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@see</span> AnnotationBeanNameGenerator</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@see</span> FullyQualifiedAnnotationBeanNameGenerator</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	Class&lt;? <span class="keyword">extends</span> <span class="title class_">BeanNameGenerator</span>&gt; nameGenerator() <span class="keyword">default</span> BeanNameGenerator.class;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * The &#123;<span class="doctag">@link</span> ScopeMetadataResolver&#125; to be used for resolving the scope of detected components.</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	Class&lt;? <span class="keyword">extends</span> <span class="title class_">ScopeMetadataResolver</span>&gt; scopeResolver() <span class="keyword">default</span> AnnotationScopeMetadataResolver.class;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * Indicates whether proxies should be generated for detected components, which may be</span></span><br><span class="line"><span class="comment">	 * necessary when using scopes in a proxy-style fashion.</span></span><br><span class="line"><span class="comment">	 * &lt;p&gt;The default is defer to the default behavior of the component scanner used to</span></span><br><span class="line"><span class="comment">	 * execute the actual scan.</span></span><br><span class="line"><span class="comment">	 * &lt;p&gt;Note that setting this attribute overrides any value set for &#123;<span class="doctag">@link</span> #scopeResolver&#125;.</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@see</span> ClassPathBeanDefinitionScanner#setScopedProxyMode(ScopedProxyMode)</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	ScopedProxyMode <span class="title function_">scopedProxy</span><span class="params">()</span> <span class="keyword">default</span> ScopedProxyMode.DEFAULT;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * Controls the class files eligible for component detection.</span></span><br><span class="line"><span class="comment">	 * &lt;p&gt;Consider use of &#123;<span class="doctag">@link</span> #includeFilters&#125; and &#123;<span class="doctag">@link</span> #excludeFilters&#125;</span></span><br><span class="line"><span class="comment">	 * for a more flexible approach.</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	String <span class="title function_">resourcePattern</span><span class="params">()</span> <span class="keyword">default</span> ClassPathScanningCandidateComponentProvider.DEFAULT_RESOURCE_PATTERN;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * Indicates whether automatic detection of classes annotated with &#123;<span class="doctag">@code</span> <span class="doctag">@Component</span>&#125;</span></span><br><span class="line"><span class="comment">	 * &#123;<span class="doctag">@code</span> <span class="doctag">@Repository</span>&#125;, &#123;<span class="doctag">@code</span> <span class="doctag">@Service</span>&#125;, or &#123;<span class="doctag">@code</span> <span class="doctag">@Controller</span>&#125; should be enabled.</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="type">boolean</span> <span class="title function_">useDefaultFilters</span><span class="params">()</span> <span class="keyword">default</span> <span class="literal">true</span>;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * Specifies which types are eligible for component scanning.</span></span><br><span class="line"><span class="comment">	 * &lt;p&gt;Further narrows the set of candidate components from everything in &#123;<span class="doctag">@link</span> #basePackages&#125;</span></span><br><span class="line"><span class="comment">	 * to everything in the base packages that matches the given filter or filters.</span></span><br><span class="line"><span class="comment">	 * &lt;p&gt;Note that these filters will be applied in addition to the default filters, if specified.</span></span><br><span class="line"><span class="comment">	 * Any type under the specified base packages which matches a given filter will be included,</span></span><br><span class="line"><span class="comment">	 * even if it does not match the default filters (i.e. is not annotated with &#123;<span class="doctag">@code</span> <span class="doctag">@Component</span>&#125;).</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@see</span> #resourcePattern()</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@see</span> #useDefaultFilters()</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	Filter[] includeFilters() <span class="keyword">default</span> &#123;&#125;;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * Specifies which types are not eligible for component scanning.</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@see</span> #resourcePattern</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	Filter[] excludeFilters() <span class="keyword">default</span> &#123;&#125;;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * Specify whether scanned beans should be registered for lazy initialization.</span></span><br><span class="line"><span class="comment">	 * &lt;p&gt;Default is &#123;<span class="doctag">@code</span> false&#125;; switch this to &#123;<span class="doctag">@code</span> true&#125; when desired.</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@since</span> 4.1</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="type">boolean</span> <span class="title function_">lazyInit</span><span class="params">()</span> <span class="keyword">default</span> <span class="literal">false</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * Declares the type filter to be used as an &#123;<span class="doctag">@linkplain</span> ComponentScan#includeFilters</span></span><br><span class="line"><span class="comment">	 * include filter&#125; or &#123;<span class="doctag">@linkplain</span> ComponentScan#excludeFilters exclude filter&#125;.</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	<span class="meta">@Retention(RetentionPolicy.RUNTIME)</span></span><br><span class="line">	<span class="meta">@Target(&#123;&#125;)</span></span><br><span class="line">	<span class="meta">@interface</span> Filter &#123;</span><br><span class="line"></span><br><span class="line">		<span class="comment">/**</span></span><br><span class="line"><span class="comment">		 * The type of filter to use.</span></span><br><span class="line"><span class="comment">		 * &lt;p&gt;Default is &#123;<span class="doctag">@link</span> FilterType#ANNOTATION&#125;.</span></span><br><span class="line"><span class="comment">		 * <span class="doctag">@see</span> #classes</span></span><br><span class="line"><span class="comment">		 * <span class="doctag">@see</span> #pattern</span></span><br><span class="line"><span class="comment">		 */</span></span><br><span class="line">		FilterType <span class="title function_">type</span><span class="params">()</span> <span class="keyword">default</span> FilterType.ANNOTATION;</span><br><span class="line"></span><br><span class="line">		<span class="comment">/**</span></span><br><span class="line"><span class="comment">		 * Alias for &#123;<span class="doctag">@link</span> #classes&#125;.</span></span><br><span class="line"><span class="comment">		 * <span class="doctag">@see</span> #classes</span></span><br><span class="line"><span class="comment">		 */</span></span><br><span class="line">		<span class="meta">@AliasFor(&quot;classes&quot;)</span></span><br><span class="line">		Class&lt;?&gt;[] value() <span class="keyword">default</span> &#123;&#125;;</span><br><span class="line"></span><br><span class="line">		<span class="comment">/**</span></span><br><span class="line"><span class="comment">		 * The class or classes to use as the filter.</span></span><br><span class="line"><span class="comment">		 * &lt;p&gt;The following table explains how the classes will be interpreted</span></span><br><span class="line"><span class="comment">		 * based on the configured value of the &#123;<span class="doctag">@link</span> #type&#125; attribute.</span></span><br><span class="line"><span class="comment">		 * &lt;table border=&quot;1&quot;&gt;</span></span><br><span class="line"><span class="comment">		 * &lt;tr&gt;&lt;th&gt;&#123;<span class="doctag">@code</span> FilterType&#125;&lt;/th&gt;&lt;th&gt;Class Interpreted As&lt;/th&gt;&lt;/tr&gt;</span></span><br><span class="line"><span class="comment">		 * &lt;tr&gt;&lt;td&gt;&#123;<span class="doctag">@link</span> FilterType#ANNOTATION ANNOTATION&#125;&lt;/td&gt;</span></span><br><span class="line"><span class="comment">		 * &lt;td&gt;the annotation itself&lt;/td&gt;&lt;/tr&gt;</span></span><br><span class="line"><span class="comment">		 * &lt;tr&gt;&lt;td&gt;&#123;<span class="doctag">@link</span> FilterType#ASSIGNABLE_TYPE ASSIGNABLE_TYPE&#125;&lt;/td&gt;</span></span><br><span class="line"><span class="comment">		 * &lt;td&gt;the type that detected components should be assignable to&lt;/td&gt;&lt;/tr&gt;</span></span><br><span class="line"><span class="comment">		 * &lt;tr&gt;&lt;td&gt;&#123;<span class="doctag">@link</span> FilterType#CUSTOM CUSTOM&#125;&lt;/td&gt;</span></span><br><span class="line"><span class="comment">		 * &lt;td&gt;an implementation of &#123;<span class="doctag">@link</span> TypeFilter&#125;&lt;/td&gt;&lt;/tr&gt;</span></span><br><span class="line"><span class="comment">		 * &lt;/table&gt;</span></span><br><span class="line"><span class="comment">		 * &lt;p&gt;When multiple classes are specified, &lt;em&gt;OR&lt;/em&gt; logic is applied</span></span><br><span class="line"><span class="comment">		 * &amp;mdash; for example, &quot;include types annotated with &#123;<span class="doctag">@code</span> <span class="doctag">@Foo</span>&#125; OR &#123;<span class="doctag">@code</span> <span class="doctag">@Bar</span>&#125;&quot;.</span></span><br><span class="line"><span class="comment">		 * &lt;p&gt;Custom &#123;<span class="doctag">@link</span> TypeFilter TypeFilters&#125; may optionally implement any of the</span></span><br><span class="line"><span class="comment">		 * following &#123;<span class="doctag">@link</span> org.springframework.beans.factory.Aware Aware&#125; interfaces, and</span></span><br><span class="line"><span class="comment">		 * their respective methods will be called prior to &#123;<span class="doctag">@link</span> TypeFilter#match match&#125;:</span></span><br><span class="line"><span class="comment">		 * &lt;ul&gt;</span></span><br><span class="line"><span class="comment">		 * &lt;li&gt;&#123;<span class="doctag">@link</span> org.springframework.context.EnvironmentAware EnvironmentAware&#125;&lt;/li&gt;</span></span><br><span class="line"><span class="comment">		 * &lt;li&gt;&#123;<span class="doctag">@link</span> org.springframework.beans.factory.BeanFactoryAware BeanFactoryAware&#125;</span></span><br><span class="line"><span class="comment">		 * &lt;li&gt;&#123;<span class="doctag">@link</span> org.springframework.beans.factory.BeanClassLoaderAware BeanClassLoaderAware&#125;</span></span><br><span class="line"><span class="comment">		 * &lt;li&gt;&#123;<span class="doctag">@link</span> org.springframework.context.ResourceLoaderAware ResourceLoaderAware&#125;</span></span><br><span class="line"><span class="comment">		 * &lt;/ul&gt;</span></span><br><span class="line"><span class="comment">		 * &lt;p&gt;Specifying zero classes is permitted but will have no effect on component</span></span><br><span class="line"><span class="comment">		 * scanning.</span></span><br><span class="line"><span class="comment">		 * <span class="doctag">@since</span> 4.2</span></span><br><span class="line"><span class="comment">		 * <span class="doctag">@see</span> #value</span></span><br><span class="line"><span class="comment">		 * <span class="doctag">@see</span> #type</span></span><br><span class="line"><span class="comment">		 */</span></span><br><span class="line">		<span class="meta">@AliasFor(&quot;value&quot;)</span></span><br><span class="line">		Class&lt;?&gt;[] classes() <span class="keyword">default</span> &#123;&#125;;</span><br><span class="line"></span><br><span class="line">		<span class="comment">/**</span></span><br><span class="line"><span class="comment">		 * The pattern (or patterns) to use for the filter, as an alternative</span></span><br><span class="line"><span class="comment">		 * to specifying a Class &#123;<span class="doctag">@link</span> #value&#125;.</span></span><br><span class="line"><span class="comment">		 * &lt;p&gt;If &#123;<span class="doctag">@link</span> #type&#125; is set to &#123;<span class="doctag">@link</span> FilterType#ASPECTJ ASPECTJ&#125;,</span></span><br><span class="line"><span class="comment">		 * this is an AspectJ type pattern expression. If &#123;<span class="doctag">@link</span> #type&#125; is</span></span><br><span class="line"><span class="comment">		 * set to &#123;<span class="doctag">@link</span> FilterType#REGEX REGEX&#125;, this is a regex pattern</span></span><br><span class="line"><span class="comment">		 * for the fully-qualified class names to match.</span></span><br><span class="line"><span class="comment">		 * <span class="doctag">@see</span> #type</span></span><br><span class="line"><span class="comment">		 * <span class="doctag">@see</span> #classes</span></span><br><span class="line"><span class="comment">		 */</span></span><br><span class="line">		String[] pattern() <span class="keyword">default</span> &#123;&#125;;</span><br><span class="line"></span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<h3 id="源码中属性含义解析"><a href="#源码中属性含义解析" class="headerlink" title="源码中属性含义解析"></a>源码中属性含义解析</h3><blockquote>
<p><code>@ComponentScan</code>注解中每个属性的含义</p>
<ul>
<li><p><code>value</code>: 作用同<code>basePackages</code>属性, String[] 数组类型,指定要扫描的包名.如果指定了要扫描的包名,则Spring会扫描指定的包及其子包下的所有类.</p>
</li>
<li><p><code>basePackages</code>: 作用同<code>value</code>属性, String[] 数组类型,指定要扫描的包名.如果指定了要扫描的包名,则Spring会扫描指定的包及其子包下的所有类.</p>
</li>
<li><p><code>basePcakageClasses</code>: <code>Class&lt;?&gt;</code>数组类型,指定要扫描的类的<code>Class</code>对象.该类所在包及其子包下的其他类也会被扫描并注入<code>IOC</code>容器. (例如: <code>@ComponentScan(basePackageClasses = UserService.class),则 UserService所在包及其子包下的其他类也会被扫描</code>)</p>
</li>
<li><p><code>nameGenerator</code>: <code>Class&lt;? extends BeanNameGenerator&gt;</code>类型,指定扫描类时,向<code>IOC</code>注入<code>Bean</code>对象时的命名规则</p>
</li>
<li><p><code>scopeResolver</code>: <code>Class&lt;? extends ScopeMetadataResolver</code>类型,扫描类时,用于处理并转换符合条件的Bean的作用范围</p>
</li>
<li><p><code>scopeProxy</code>: <code>ScopeProxyMode</code>类型,指定生成<code>Bean</code>对象时的处理方式,默认的处理方法是<code>DEFAULT</code>,也就是不使用代理.<strong><a href="#ScopedProxyMode">详细解释</a></strong></p>
</li>
<li><p><code>resourcePattoern</code>: <code>String</code>类型,用于指定扫描的文件类型,默认是扫描指定包下的<code>**/.class</code>(**表示当前包及其子包; &#x2F;.class表示任意类名的字节码)</p>
</li>
<li><p><code>useDefaultFilters</code>: <code>boolean</code>类型,是否自动检测<code>@Component</code>,<code>@Repository</code>, <code>@Service</code>, <code>@Controller</code>注解, 默认是<code>true</code></p>
</li>
<li><p><code>includeFilters</code>: <code>Filter[]</code>数组类型,自定义组件扫描过滤规则,符合过滤规则的类的<code>Bean</code>定义信息会被注册到<code>IOC</code>容器中.<code>includeFilters</code>表示只包含对应的规则,当使用<code>includeFilters()</code>来指定只包含哪些注解标注的类时,需要禁用默认的过滤规则,也就是需要将<code>useDefaultFilters</code>属性设置为<code>false</code>.并且,除了符合过滤规则的类外,<code>Spring</code>内置的一些类的<code>Bean</code>定义信息注册到<code>IOC</code>容器时不受过滤规则限制;如:</p>
</li>
</ul>
<p><code>org.springframework.context.annotation.internalConfigurationAnnotationProcessor</code></p>
<p><code>org.springframework.context.annotation.internalAutowiredAnnotationProcessor</code><br><code>org.springframework.context.event.internalEventListenerProcessor</code><br><code>org.springframework.context.event.internalEventListenerFactory</code></p>
<ul>
<li><p><code>excludeFilters</code>: <code>Filter</code>数组类型,自定义组件扫描过滤规则,<code>excludeFilters</code>表示排除使用对应的规则,符合过滤规则类的<code>Bean</code>定义信息不会注册到<code>IOC</code>容器中</p>
</li>
<li><p><code>lazyInit</code>: <code>boolean</code>类型,从<code>Spring 4.1</code>版本开始提供,表示<code>Spring</code>扫描组件时采用懒加载, 默认<code>false</code>,表示不开启懒加载</p>
</li>
</ul>
</blockquote>
<blockquote>
<p><code>@Filter</code>注解中每个属性的含义</p>
<ul>
<li><code>type</code>: <code>FilterType</code>类型,表示过滤规则的类型.<strong><a href="#FilterType">详细解释</a></strong></li>
<li><code>value</code>: <code>Class&lt;?&gt;[]</code>数组类型,过滤符合规则的类,作用同<code>classes</code>属性</li>
<li><code>classes</code>: <code>Class&lt;?&gt;[]</code>数组类型,过滤符合规则的类,作用同<code>value</code>属性</li>
<li><code>pattern</code>: 如果<code>FilterType</code>取值为<code>ASPECTJ</code>,则此属性表示<code>ASPECTJ</code>表达式</li>
</ul>
</blockquote>
<h4 id="ScopedProxyMode"><a href="#ScopedProxyMode" class="headerlink" title="ScopedProxyMode"></a><strong><code>ScopedProxyMode</code></strong></h4><blockquote>
<p><code>ScopedProxyMode</code>枚举类表示<code>Spring</code>指定生成<code>Bean</code>对象时的代理方式</p>
</blockquote>
<div class="highlight-container" data-rel="Java"><figure class="iseeu highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ==================== 源码 ====================</span></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> Mark Fisher</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@since</span> 2.5</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@see</span> ScopeMetadata</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">enum</span> <span class="title class_">ScopedProxyMode</span> &#123;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * Default typically equals &#123;<span class="doctag">@link</span> #NO&#125;, unless a different default</span></span><br><span class="line"><span class="comment">	 * has been configured at the component-scan instruction level.</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	DEFAULT,</span><br><span class="line"></span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * Do not create a scoped proxy.</span></span><br><span class="line"><span class="comment">	 * &lt;p&gt;This proxy-mode is not typically useful when used with a</span></span><br><span class="line"><span class="comment">	 * non-singleton scoped instance, which should favor the use of the</span></span><br><span class="line"><span class="comment">	 * &#123;<span class="doctag">@link</span> #INTERFACES&#125; or &#123;<span class="doctag">@link</span> #TARGET_CLASS&#125; proxy-modes instead if it</span></span><br><span class="line"><span class="comment">	 * is to be used as a dependency.</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	NO,</span><br><span class="line"></span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * Create a JDK dynamic proxy implementing &lt;i&gt;all&lt;/i&gt; interfaces exposed by</span></span><br><span class="line"><span class="comment">	 * the class of the target object.</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	INTERFACES,</span><br><span class="line"></span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * Create a class-based proxy (uses CGLIB).</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	TARGET_CLASS</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<blockquote>
<p><code>ScopedProxyMode</code>类是从<code>Spring 2.5</code>版本开始提供的枚举类; 属性含义</p>
<ul>
<li><code>DEFAULT</code>: 默认的代理方式,也就是不使用代理,除非在<code>component-sacn</code>级别使用了不同的配置</li>
<li><code>NO</code>: 不使用代理</li>
<li><code>INTERFACES</code>: 基于<code>JDK</code>动态代理实现接口代理对象</li>
<li><code>TARGET_CLASS</code>: 基于<code>CGLIB</code>动态代理创建类代理对象</li>
</ul>
</blockquote>
<h4 id="FilterType"><a href="#FilterType" class="headerlink" title="FilterType"></a><strong><code>FilterType</code></strong></h4><blockquote>
<p><code>FilterType</code>枚举类表示<code>Spring</code>扫描类时的过滤类型</p>
</blockquote>
<div class="highlight-container" data-rel="Java"><figure class="iseeu highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ==================== 源码 ====================</span></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> Mark Fisher</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> Juergen Hoeller</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> Chris Beams</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@since</span> 2.5</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@see</span> ComponentScan</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@see</span> ComponentScan#includeFilters()</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@see</span> ComponentScan#excludeFilters()</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@see</span> org.springframework.core.type.filter.TypeFilter</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">enum</span> <span class="title class_">FilterType</span> &#123;</span><br><span class="line"></span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * Filter candidates marked with a given annotation.</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@see</span> org.springframework.core.type.filter.AnnotationTypeFilter</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	ANNOTATION,</span><br><span class="line"></span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * Filter candidates assignable to a given type.</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@see</span> org.springframework.core.type.filter.AssignableTypeFilter</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	ASSIGNABLE_TYPE,</span><br><span class="line"></span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * Filter candidates matching a given AspectJ type pattern expression.</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@see</span> org.springframework.core.type.filter.AspectJTypeFilter</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	ASPECTJ,</span><br><span class="line"></span><br><span class="line">	<span class="comment">/**</span></span><br><span class="line"><span class="comment">	 * Filter candidates matching a given regex pattern.</span></span><br><span class="line"><span class="comment">	 * <span class="doctag">@see</span> org.springframework.core.type.filter.RegexPatternTypeFilter</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	REGEX,</span><br><span class="line"></span><br><span class="line">	<span class="comment">/** Filter candidates using a given custom</span></span><br><span class="line"><span class="comment">	 * &#123;<span class="doctag">@link</span> org.springframework.core.type.filter.TypeFilter&#125; implementation.</span></span><br><span class="line"><span class="comment">	 */</span></span><br><span class="line">	CUSTOM</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<blockquote>
<p><code>FilterType</code>类是从<code>Spring 2.5</code>版本开始提供的枚举类,各个属性</p>
<ul>
<li><code>ANNOTATION</code>: 按照注解进行过滤</li>
<li><code>ASSIGNABLE_TYPE</code>: 按照给定的类型进行过滤</li>
<li><code>ASPECTJ</code>: 按照<code>ASPECTJ</code>表达式进行过滤</li>
<li><code>REGEX</code>: 按照正则表达式进行过滤</li>
<li><code>CUSTOM</code>: 按照自定义规则进行过滤,使用自定义过滤规则时,自定义的过滤器需要实现<code>org.springframework.core.type.filter.TypeFilter</code>接口</li>
</ul>
<p>在<code>FilterType</code>枚举类中,<code>ANNOTATION</code>和<code>ASSIGNABLE_TYPE</code>是比较常用的,<code>ASPECTJ</code>和<code>REGEX</code>不太常用,如果<code>FilterType</code>枚举类无法满足日常开发需求时,可以通过实现<code>org.springframework.core.type.filter.TypeFilter</code>接口来自定义过滤规则,此时,将<code>@Filter</code>中<code>type</code>属性设置为<code>FilterType.CUSTOM</code>,<code>classes</code>属性设置为自定义规则的类对应的<code>Class</code>对象</p>
</blockquote>
<h2 id="使用案例"><a href="#使用案例" class="headerlink" title="使用案例"></a>使用案例</h2><h3 id="案例描述"><a href="#案例描述" class="headerlink" title="案例描述"></a>案例描述</h3><blockquote>
<p>使用自定义过滤规则实现<code>Spring</code>扫描指定包下的类时,使得名称中包含<code>特定</code>字符串的类符合过滤规则</p>
</blockquote>
<h3 id="案例实现"><a href="#案例实现" class="headerlink" title="案例实现"></a>案例实现</h3><h4 id="新增自定义过滤规则类"><a href="#新增自定义过滤规则类" class="headerlink" title="新增自定义过滤规则类"></a>新增自定义过滤规则类</h4><div class="highlight-container" data-rel="Java"><figure class="iseeu highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> : igsshan</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> : 2023/11/20 10:35</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@since</span> : 1.0</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ComponentScanFilter</span> <span class="keyword">implements</span> <span class="title class_">TypeFilter</span> &#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 此方法返回一个 boolean 值, true 表示注入到 ioc 容器中</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> metadataReader 表示读取到的当前正在扫描的类的信息</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> metadataReaderFactory 表示可以获得到其他任何类的信息</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> 返回值</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@throws</span> IOException IOException</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">match</span><span class="params">(MetadataReader metadataReader, MetadataReaderFactory metadataReaderFactory)</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">        <span class="type">ClassMetadata</span> <span class="variable">classMetadata</span> <span class="operator">=</span> metadataReader.getClassMetadata();</span><br><span class="line">        <span class="type">String</span> <span class="variable">className</span> <span class="operator">=</span> classMetadata.getClassName();</span><br><span class="line">        <span class="keyword">return</span> className.contains(<span class="string">&quot;componentScanConfig&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>



<h4 id="新建配置类"><a href="#新建配置类" class="headerlink" title="新建配置类"></a>新建配置类</h4><div class="highlight-container" data-rel="Java"><figure class="iseeu highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> : igsshan</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> : 2023/11/20 10:39</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@since</span> : 1.0</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="meta">@ComponentScan(value = &quot;com.igsshan.springbootbasic.filter&quot;, includeFilters = &#123;</span></span><br><span class="line"><span class="meta">        @ComponentScan.Filter(type = FilterType.CUSTOM, classes = ComponentScanFilter.class)</span></span><br><span class="line"><span class="meta">&#125;, useDefaultFilters = false)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ComponentScanConfig</span> &#123;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure></div>

<blockquote>
<p>在自定义配置类<code>ComponentScanConfig</code>类上标注了<code>@Configuration</code>注解,表示<code>ComponentScanConfig</code>类是<code>Spring</code>的配置类;标注的<code>@ComponentScan</code>注解中指定了要扫描的包名,使用了只包含的过滤规则,并采用自定义过滤规则;</p>
<p><code>注意: 需要将 userDefaultFilters 设置成 false</code></p>
</blockquote>
<h4 id="测试结果"><a href="#测试结果" class="headerlink" title="测试结果"></a>测试结果</h4><p><strong>测试类</strong></p>
<div class="highlight-container" data-rel="Java"><figure class="iseeu highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ComponentScanTest</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line"></span><br><span class="line">        <span class="type">AnnotationConfigApplicationContext</span> <span class="variable">context</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">AnnotationConfigApplicationContext</span>(ComponentScanConfig.class);</span><br><span class="line">        String[] beanDefinitionNames = context.getBeanDefinitionNames();</span><br><span class="line">        System.out.println(<span class="string">&quot;==========================&quot;</span>);</span><br><span class="line">        Arrays.stream(beanDefinitionNames).forEach(System.out::println);</span><br><span class="line">        System.out.println(<span class="string">&quot;==========================&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<p><strong>测试结果</strong></p>
<div class="highlight-container" data-rel="Java"><figure class="iseeu highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">==========================</span><br><span class="line">org.springframework.context.annotation.internalConfigurationAnnotationProcessor</span><br><span class="line">org.springframework.context.annotation.internalAutowiredAnnotationProcessor</span><br><span class="line">org.springframework.context.annotation.internalCommonAnnotationProcessor</span><br><span class="line">org.springframework.context.event.internalEventListenerProcessor</span><br><span class="line">org.springframework.context.event.internalEventListenerFactory</span><br><span class="line">componentScanConfig</span><br><span class="line">==========================</span><br><span class="line"></span><br><span class="line"><span class="comment">// 成功注入 componentScanConfig 类</span></span><br></pre></td></tr></table></figure></div>



<h3 id="其他案例"><a href="#其他案例" class="headerlink" title="其他案例"></a>其他案例</h3><h4 id="扫描时排除注解标注的类"><a href="#扫描时排除注解标注的类" class="headerlink" title="扫描时排除注解标注的类"></a>扫描时排除注解标注的类</h4><blockquote>
<p>排除<code>@Controller</code>,<code>@Service</code>和<code>@Repository</code>注解,可以在配置类上通过<code>@ComponentScan</code>注解的<code>excludeFilters()</code>属性实现</p>
</blockquote>
<div class="highlight-container" data-rel="Java"><figure class="iseeu highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> : igsshan</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> : 2023/11/20 11:58</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@since</span> : 1.0</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="meta">@ComponentScan(value = &#123;&quot;com.igsshan.springbootbasic.core&quot;&#125;, excludeFilters = &#123;</span></span><br><span class="line"><span class="meta">        @Filter(type = FilterType.ANNOTATION, classes = &#123;Controller.class, Service.class, Repository.class&#125;)</span></span><br><span class="line"><span class="meta">&#125;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ExcludeAnnotationComponentScanConfig</span> &#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<h4 id="扫码时只包含注解标注的类"><a href="#扫码时只包含注解标注的类" class="headerlink" title="扫码时只包含注解标注的类"></a>扫码时只包含注解标注的类</h4><blockquote>
<p>只包含哪些注解标注的类,可以使用<code>@ComponentScan</code>注解的<code>excludeFilters()</code>属性来指定<code>Spring</code>的包扫描;</p>
<p><code>注意: 使用excludeFilters()属性指定只包含哪些注解标注的类时, 需要禁用默认的过滤规则</code></p>
</blockquote>
<div class="highlight-container" data-rel="Java"><figure class="iseeu highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> : igsshan</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> : 2023/11/20 14:18</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@since</span> : 1.0</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="meta">@ComponentScan(value = &#123;&quot;com.igsshan.springbootbasic.core&quot;&#125;, includeFilters = &#123;</span></span><br><span class="line"><span class="meta">        @Filter(type = FilterType.ANNOTATION, classes = &#123;Controller.class&#125;)</span></span><br><span class="line"><span class="meta">&#125;, useDefaultFilters = false)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">IncludeAnnotationComponentScanConfig</span> &#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<h4 id="重复注解"><a href="#重复注解" class="headerlink" title="重复注解"></a>重复注解</h4><blockquote>
<p>在<code>Java 8</code>找那个<code>@ComponentScan</code>注解是一个可重复注解</p>
</blockquote>
<div class="highlight-container" data-rel="Java"><figure class="iseeu highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> : igsshan</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> : 2023/11/20 14:25</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@since</span> : 1.0</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="meta">@ComponentScan(value = &#123;&quot;com.igsshan.springbootbasic.core&quot;&#125;, includeFilters = &#123;</span></span><br><span class="line"><span class="meta">        @Filter(type = FilterType.ANNOTATION, classes = &#123;Controller.class&#125;)</span></span><br><span class="line"><span class="meta">&#125;, useDefaultFilters = false)</span></span><br><span class="line"><span class="meta">@ComponentScan(value = &#123;&quot;com.igsshan.springbootbasic.core&quot;&#125;, includeFilters = &#123;</span></span><br><span class="line"><span class="meta">        @Filter(type = FilterType.ANNOTATION, classes = &#123;Service.class&#125;)</span></span><br><span class="line"><span class="meta">&#125;, useDefaultFilters = false)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">JavaVersion8ComponentScanAnnotationConfig</span> &#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>



<blockquote>
<p>如果使用的是<code>Java 8</code>之前的版本,是无法使用多个<code>@ComponentScan</code>重复注解的.此时,可以在配置类上使用<code>@ComponentScas</code>注解</p>
</blockquote>
<div class="highlight-container" data-rel="Java"><figure class="iseeu highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> : igsshan</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> : 2023/11/20 14:31</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@since</span> : 1.0</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="meta">@ComponentScans(value = &#123;</span></span><br><span class="line"><span class="meta">        @ComponentScan(value = &#123;&quot;com.igsshan.springbootbasic.core&quot;&#125;, excludeFilters = &#123;</span></span><br><span class="line"><span class="meta">                @Filter(type = FilterType.ANNOTATION, classes = &#123;Controller.class&#125;)</span></span><br><span class="line"><span class="meta">        &#125;),</span></span><br><span class="line"><span class="meta">        @ComponentScan(value = &#123;&quot;com.igsshan.springbootbasic.core&quot;&#125;, includeFilters = &#123;</span></span><br><span class="line"><span class="meta">                @Filter(type = FilterType.ANNOTATION, classes = &#123;Service.class&#125;)</span></span><br><span class="line"><span class="meta">        &#125;)</span></span><br><span class="line"><span class="meta">&#125;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">JavaVersionNone8ComponentScanConfig</span> &#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>



<h4 id="扫描时按照指定的类型进行过滤"><a href="#扫描时按照指定的类型进行过滤" class="headerlink" title="扫描时按照指定的类型进行过滤"></a>扫描时按照指定的类型进行过滤</h4><blockquote>
<p>使用<code>@ComponentScan</code>注解进行包扫描时,按照给定的类型只包含<code>TestService类 (接口)或其子类(实现类或者子接口)</code>的组件</p>
</blockquote>
<div class="highlight-container" data-rel="Java"><figure class="iseeu highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> : igsshan</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> : 2023/11/20 14:46</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@since</span> : 1.0</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="meta">@ComponentScan(value = &#123;&quot;com.igsshan.springbootbasic.core&quot;&#125;, includeFilters = &#123;</span></span><br><span class="line"><span class="meta">        @Filter(type = FilterType.ASSIGNABLE_TYPE, classes = &#123;TestService.class&#125;)</span></span><br><span class="line"><span class="meta">&#125;, useDefaultFilters = false)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">CustomComponentScanConfig</span> &#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<blockquote>
<p>主要是<code>TestService</code>类型的组件,都会被加载到容器中,</p>
<p>当<code>TestService</code>是一个<code>Java</code>类时,<code>TestService</code>类及其子类都会被加载都<code>Spring</code>容器中</p>
<p>当<code>TestService</code>是一个<code>接口</code>时,<code>TestService</code>其子接口或实现类都会被加载到<code>Spring</code>容器中</p>
</blockquote>
<h4 id="扫描时按照ASPECTJ表达式进行过滤"><a href="#扫描时按照ASPECTJ表达式进行过滤" class="headerlink" title="扫描时按照ASPECTJ表达式进行过滤"></a>扫描时按照ASPECTJ表达式进行过滤</h4><blockquote>
<p>使用<code>@ComponentScan</code>注解进行包扫描时,按照<code>ASPECTJ</code>表达式进行过滤</p>
</blockquote>
<div class="highlight-container" data-rel="Java"><figure class="iseeu highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> : igsshan</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> : 2023/11/20 15:00</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@since</span> : 1.0</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="meta">@ComponentScan(value = &#123;&quot;com.igsshan.springbootbasic.filter&quot;&#125;, includeFilters = &#123;</span></span><br><span class="line"><span class="meta">        @Filter(type = FilterType.ASPECTJ, classes = &#123;AspectjFilter.class&#125;)</span></span><br><span class="line"><span class="meta">&#125;, useDefaultFilters = false)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">AspectjComponentScanConfig</span> &#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<blockquote>
<p>其中<code>AspectjFilter</code>类就是自定义的<code>ASPECTJ</code>表达式的过滤器类</p>
</blockquote>
<h4 id="扫描时按照正则表达式进行过滤"><a href="#扫描时按照正则表达式进行过滤" class="headerlink" title="扫描时按照正则表达式进行过滤"></a>扫描时按照正则表达式进行过滤</h4><blockquote>
<p>使用<code>@ComponentScan</code>注解进行包扫描时,按照正则表达式进行过滤</p>
</blockquote>
<div class="highlight-container" data-rel="Java"><figure class="iseeu highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> : igsshan</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> : 2023/11/20 15:16</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@since</span> : 1.0</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="meta">@ComponentScan(value = &#123;&quot;com.igsshan.springbootbasic.filter&quot;&#125;, includeFilters = &#123;</span></span><br><span class="line"><span class="meta">        @Filter(type = FilterType.ASPECTJ, classes = &#123;RegexFilter.class&#125;)</span></span><br><span class="line"><span class="meta">&#125;, useDefaultFilters = false)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">RegexComponentScanConfig</span> &#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>



<h4 id="扫描时按照自定义规则进行过滤"><a href="#扫描时按照自定义规则进行过滤" class="headerlink" title="扫描时按照自定义规则进行过滤"></a>扫描时按照自定义规则进行过滤</h4><blockquote>
<p>如果要自定义规则过滤,自定义规则的类必须是<code>org.springframework.core.type.filter.TypeFilter</code>接口的实现类</p>
</blockquote>
<div class="highlight-container" data-rel="Java"><figure class="iseeu highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> : igsshan</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> : 2023/11/20 15:52</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@since</span> : 1.0</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">CustomTypeFilter</span> <span class="keyword">implements</span> <span class="title class_">TypeFilter</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">match</span><span class="params">(MetadataReader metadataReader, MetadataReaderFactory metadataReaderFactory)</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<blockquote>
<p>创建一个实现<code>TypeFilter</code>接口的类</p>
<p>当实现<code>TypeFilter</code>接口时,需要实现<code>TypeFilter</code>接口中的<code>match()</code>方法,<code>match()</code>方法返回值是<code>boolean</code>类型.</p>
<p>当返回<code>true</code>时,表示符合过滤规则,会将类的<code>Bean</code>定义信息注册到<code>IOC</code>容器中;</p>
<p>当返回<code>false</code>时,表示不符合过滤规则,对应的<code>Bean</code>定义信息不会注册到<code>IOC</code>容器中.</p>
</blockquote>
<div class="highlight-container" data-rel="Java"><figure class="iseeu highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> : igsshan</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> : 2023/11/20 16:07</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@since</span> : 1.0</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="meta">@ComponentScan(value = &#123;&quot;com.igsshan.springbootbasic.filter&quot;&#125;, excludeFilters = &#123;</span></span><br><span class="line"><span class="meta">        @Filter(type = FilterType.CUSTOM, classes = &#123;CustomTypeFilter.class&#125;)</span></span><br><span class="line"><span class="meta">&#125;, useDefaultFilters = false)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">CustomTypeComponentScanConfig</span> &#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>










































        </div>

        

        
            <ul class="post-tags-box">
                
                    <li class="tag-item">
                        <a href="/GSSBlog/tags/Spring/">#Spring</a>&nbsp;
                    </li>
                
            </ul>
        

        

        
            <div class="article-nav">
                
                    <div class="article-prev">
                        <a class="prev"
                        rel="prev"
                        href="/GSSBlog/2023/11/21/Spring%E6%9D%A1%E4%BB%B6%E6%B3%A8%E5%85%A5%E6%B3%A8%E8%A7%A3@Conditional/"
                        >
                            <span class="left arrow-icon flex justify-center items-center">
                                <i class="fa-solid fa-chevron-left"></i>
                            </span>
                            <span class="title flex justify-center items-center">
                                <span class="post-nav-title-item">Spring 条件注入注解 @Conditional</span>
                                <span class="post-nav-item">上一篇</span>
                            </span>
                        </a>
                    </div>
                
                
                    <div class="article-next">
                        <a class="next"
                        rel="next"
                        href="/GSSBlog/2023/11/15/Spring%E6%B3%A8%E5%85%A5Bean/"
                        >
                            <span class="title flex justify-center items-center">
                                <span class="post-nav-title-item">Spring Bean Full vs Lite</span>
                                <span class="post-nav-item">下一篇</span>
                            </span>
                            <span class="right arrow-icon flex justify-center items-center">
                                <i class="fa-solid fa-chevron-right"></i>
                            </span>
                        </a>
                    </div>
                
            </div>
        


        
    </div>

    
        <div class="toc-content-container">
            <div class="post-toc-wrap">
    <div class="post-toc">
        <div class="toc-title">此页目录</div>
        <div class="page-title">Spring 包扫描注解 @ComponentScan</div>
        <ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#ComponentScan%E4%BD%BF%E7%94%A8%E5%9C%BA%E6%99%AF"><span class="nav-text">@ComponentScan使用场景</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%85%A5%E9%97%A8%E4%BB%8B%E7%BB%8D"><span class="nav-text">入门介绍</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%B3%A8%E8%A7%A3%E8%AF%B4%E6%98%8E"><span class="nav-text">注解说明</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%BA%90%E7%A0%81%E8%A7%A3%E6%9E%90"><span class="nav-text">源码解析</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%BA%90%E7%A0%81%E4%B8%AD%E5%B1%9E%E6%80%A7%E5%90%AB%E4%B9%89%E8%A7%A3%E6%9E%90"><span class="nav-text">源码中属性含义解析</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%BD%BF%E7%94%A8%E6%A1%88%E4%BE%8B"><span class="nav-text">使用案例</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%A1%88%E4%BE%8B%E6%8F%8F%E8%BF%B0"><span class="nav-text">案例描述</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%A1%88%E4%BE%8B%E5%AE%9E%E7%8E%B0"><span class="nav-text">案例实现</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%85%B6%E4%BB%96%E6%A1%88%E4%BE%8B"><span class="nav-text">其他案例</span></a></li></ol></li></ol></li></ol>

    </div>
</div>
        </div>
    
</div>



                

            </div>

            

        </div>

        <div class="main-content-footer">
            <footer class="footer mt-5 py-5 h-auto text-base text-third-text-color relative border-t-2 border-t-border-color">
    <div class="info-container py-3 text-center">
        
        <div class="text-center">
            &copy;
            
              <span>2022</span>
              -
            
            2025&nbsp;&nbsp;<i class="fa-solid fa-heart fa-beat" style="--fa-animation-duration: 0.5s; color: #f54545"></i>&nbsp;&nbsp;<a href="/GSSBlog/">igxiaoshan</a>
        </div>
        
            <script data-swup-reload-script src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
            <div class="relative text-center lg:absolute lg:right-[20px] lg:top-1/2 lg:-translate-y-1/2 lg:text-right">
                
                    <span id="busuanzi_container_site_uv" class="lg:!block">
                        <span class="text-sm">访问人数</span>
                        <span id="busuanzi_value_site_uv"></span>
                    </span>
                
                
                    <span id="busuanzi_container_site_pv" class="lg:!block">
                        <span class="text-sm">总访问量</span>
                        <span id="busuanzi_value_site_pv"></span>
                    </span>
                
            </div>
        
        <div class="relative text-center lg:absolute lg:left-[20px] lg:top-1/2 lg:-translate-y-1/2 lg:text-left">
            <span class="lg:block text-sm">由 <?xml version="1.0" encoding="utf-8"?><!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"><svg class="relative top-[2px] inline-block align-baseline" version="1.1" id="圖層_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="1rem" height="1rem" viewBox="0 0 512 512" enable-background="new 0 0 512 512" xml:space="preserve"><path fill="#0E83CD" d="M256.4,25.8l-200,115.5L56,371.5l199.6,114.7l200-115.5l0.4-230.2L256.4,25.8z M349,354.6l-18.4,10.7l-18.6-11V275H200v79.6l-18.4,10.7l-18.6-11v-197l18.5-10.6l18.5,10.8V237h112v-79.6l18.5-10.6l18.5,10.8V354.6z"/></svg><a target="_blank" class="text-base" href="https://hexo.io">Hexo</a> 驱动</span>
            <span class="text-sm lg:block">主题&nbsp;<a class="text-base" target="_blank" href="https://github.com/EvanNotFound/hexo-theme-redefine">Redefine v2.5.0</a></span>
        </div>
        
        
        
        
        
    </div>  
</footer>
        </div>
    </div>

    
        <div class="post-tools">
            <div class="post-tools-container">
    <ul class="article-tools-list">
        <!-- TOC aside toggle -->
        
            <li class="right-bottom-tools page-aside-toggle">
                <i class="fa-regular fa-outdent"></i>
            </li>
        

        <!-- go comment -->
        
    </ul>
</div>

        </div>
    

    <div class="right-side-tools-container">
        <div class="side-tools-container">
    <ul class="hidden-tools-list">
        <li class="right-bottom-tools tool-font-adjust-plus flex justify-center items-center">
            <i class="fa-regular fa-magnifying-glass-plus"></i>
        </li>

        <li class="right-bottom-tools tool-font-adjust-minus flex justify-center items-center">
            <i class="fa-regular fa-magnifying-glass-minus"></i>
        </li>

        <li class="right-bottom-tools tool-dark-light-toggle flex justify-center items-center">
            <i class="fa-regular fa-moon"></i>
        </li>

        <!-- rss -->
        

        

        <li class="right-bottom-tools tool-scroll-to-bottom flex justify-center items-center">
            <i class="fa-regular fa-arrow-down"></i>
        </li>
    </ul>

    <ul class="visible-tools-list">
        <li class="right-bottom-tools toggle-tools-list flex justify-center items-center">
            <i class="fa-regular fa-cog fa-spin"></i>
        </li>
        
            <li class="right-bottom-tools tool-scroll-to-top flex justify-center items-center">
                <i class="arrow-up fas fa-arrow-up"></i>
                <span class="percent"></span>
            </li>
        
        
    </ul>
</div>

    </div>

    <div class="image-viewer-container">
    <img src="">
</div>


    
        <div class="search-pop-overlay">
    <div class="popup search-popup">
        <div class="search-header">
          <span class="search-input-field-pre">
            <i class="fa-solid fa-keyboard"></i>
          </span>
            <div class="search-input-container">
                <input autocomplete="off"
                       autocorrect="off"
                       autocapitalize="off"
                       placeholder="搜索..."
                       spellcheck="false"
                       type="search"
                       class="search-input"
                >
            </div>
            <span class="popup-btn-close">
                <i class="fa-solid fa-times"></i>
            </span>
        </div>
        <div id="search-result">
            <div id="no-result">
                <i class="fa-solid fa-spinner fa-spin-pulse fa-5x fa-fw"></i>
            </div>
        </div>
    </div>
</div>

    

</main>


    
<script src="/GSSBlog/js/libs/Swup.min.js"></script>

<script src="/GSSBlog/js/libs/SwupSlideTheme.min.js"></script>

<script src="/GSSBlog/js/libs/SwupScriptsPlugin.min.js"></script>

<script src="/GSSBlog/js/libs/SwupProgressPlugin.min.js"></script>

<script src="/GSSBlog/js/libs/SwupScrollPlugin.min.js"></script>

<script src="/GSSBlog/js/libs/SwupPreloadPlugin.min.js"></script>

<script>
    const swup = new Swup({
        plugins: [
            new SwupScriptsPlugin({
                optin: true,
            }),
            new SwupProgressPlugin(),
            new SwupScrollPlugin({
                offset: 80,
            }),
            new SwupSlideTheme({
                mainElement: ".main-content-body",
            }),
            new SwupPreloadPlugin(),
        ],
        containers: ["#swup"],
    });
</script>







<script src="/GSSBlog/js/tools/imageViewer.js" type="module"></script>

<script src="/GSSBlog/js/utils.js" type="module"></script>

<script src="/GSSBlog/js/main.js" type="module"></script>

<script src="/GSSBlog/js/layouts/navbarShrink.js" type="module"></script>

<script src="/GSSBlog/js/tools/scrollTopBottom.js" type="module"></script>

<script src="/GSSBlog/js/tools/lightDarkSwitch.js" type="module"></script>

<script src="/GSSBlog/js/layouts/categoryList.js" type="module"></script>



    
<script src="/GSSBlog/js/tools/localSearch.js" type="module"></script>




    
<script src="/GSSBlog/js/tools/codeBlock.js" type="module"></script>




    
<script src="/GSSBlog/js/layouts/lazyload.js" type="module"></script>






  
<script src="/GSSBlog/js/libs/Typed.min.js"></script>

  
<script src="/GSSBlog/js/plugins/typed.js" type="module"></script>







<div class="post-scripts" data-swup-reload-script>
    
        
<script src="/GSSBlog/js/libs/anime.min.js"></script>

        
<script src="/GSSBlog/js/tools/tocToggle.js" type="module"></script>

<script src="/GSSBlog/js/layouts/toc.js" type="module"></script>

<script src="/GSSBlog/js/plugins/tabs.js" type="module"></script>

    
</div>


</body>
</html>
